<!--================ Start Header Area ===============-->
<header class="header-area">
    <div >
        {{> user/header}}
    </div>
</header>
<!--================ End Header Area =================-->

<!--================ Start banner Area ===============-->
<section class="banner-area relative">
    <div class="overlay overlay-bg"></div>
    <div class="banner-content text-center">

    </div>
</section>
<!--================ End banner Area =================-->

<!--================Blog Area =================-->
<section class="blog_area section-gap single-post-area">
    <div class="container">
        <div class="row">
            <div class="col">


                <div class="col-lg-12">
                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs  tabs" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" data-toggle="tab" href="#home1" role="tab">Information</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#profile1" role="tab">Account</a>
                        </li>

                    </ul>
                    <!-- Tab panes -->
                    <div class="tab-content tabs card-block">
                        <div class="tab-pane active" id="home1" role="tabpanel"><br>
                            {{#if infoError}}
                            <div class="alert alert-danger" role="alert" style="width: auto;">
                                {{infoError}}
                            </div>
                            {{else if infoSucceed}}
                            <div class="alert alert-success" role="alert" style="width: auto;">
                                {{infoSucceed}}
                            </div>
                            {{/if}}
                            <form action="/users/updateInformation" method="POST" enctype="multipart/form-data"
                                class="needs-validation" novalidate>
                                <div class="form-group">
                                    <img src="/uploads/{{userInfo.avatar}}" id="imgShow" alt="" style="max-width:180px">
                                    <hr>
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
                                        </div>
                                        <div class="custom-file">
                                            <input type="file" name="image" class="custom-file-input" id="imgLoad"
                                                aria-describedby="inputGroupFileAddon01">
                                            <label class="custom-file-label" for="inputGroupFile01">Choose
                                                file</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="name">FullName: <span class="changeStyle">{{userInfo.fullName}}</span>
                                    </label>
                                    <input type="text" class="form-control" id="fullName" name="fullName"
                                        placeholder="Enter your name here..." onfocus="this.placeholder = ''"
                                        onblur="this.placeholder = 'Enter your name here...'">
                                </div>
                                <div class="form-group">
                                    <label for="email">Email: <span class="changeStyle">{{userInfo.email}}</span>
                                    </label>
                                    {{#if infoError}}
                                    <input type="email" class="form-control is-invalid" id="email" name="email"
                                        placeholder="Enter your email here..." onfocus="this.placeholder = ''"
                                        onblur="this.placeholder = 'Enter your email here...'">
                                    <div class="invalid-feedback">{{infoError}}</div>
                                    {{else}}
                                    <input type="email" class="form-control" id="email" name="email"
                                        placeholder="Enter your email here..." onfocus="this.placeholder = ''"
                                        onblur="this.placeholder = 'Enter your email here...'">
                                    {{/if}}
                                </div>

                                <div class="form-group">
                                    <label for="email">Date of Birth: <span class="changeStyle">{{moment
                                            userInfo.DoB
                                            format
                                            ="DD MMMM - YYYY"}}</span>
                                    </label>
                                    <input type="date" class="form-control" id="DoB" name="DoB">
                                </div>

                                <div class="form-group">
                                    <h5 for="introduction">Bio:</h5>
                                    <textarea type="text" class="form-control" id="introduction" name="introduction"
                                        rows="4">{{userInfo.introduction}}</textarea>
                                </div>


                                <input type="hidden" name="_id" value="{{userInfo._id}}">



                                <button type="submit" class="btn "  style="float: right;">Update</button>
                            </form>
                        </div>
                        <div class="tab-pane" id="profile1" role="tabpanel"><br>

                            <form action="/users/updateAccount" method="POST"
                                enctype="application/x-www-form-urlencoded" class="needs-validation" novalidate>

                                <div class="form-group">
                                    <label for="pwd">Password</label>
                                    <div class="input-group mb-3">
                                        <input type="password" class="form-control" id="pwd" 
                                            placeholder="Enter new Password"
                                            onfocus="this.placeholder = ''"
                                            onblur="this.placeholder = 'Enter new Password'"
                                            name="password"
                                            onkeyup="check();">
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" type="button" id="btnPassword">
                                                <span class="ti-eye"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="repwd">Re-enter Password</label>
                                    <div class="input-group mb-3">
                                        <input type="password" class="form-control" id="rePwd" name="rePassword"
                                            placeholder="Re-enter Password"
                                            onfocus="this.placeholder = ''"
                                            onblur="this.placeholder = 'Re-enter Password'"
                                            onkeyup="check();">
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" type="button" id="btnRePassword">
                                                <span class="ti-eye"></span>
                                            </button>
                                        </div>
                                    </div>
                                    <span id="message"></span>
                                </div>

                                <input type="hidden" name="_method" value="PUT">
                                <input type="hidden" name="_id" value="{{userAcc._id}}">
                            {{#if accError}}
                            <div class="alert alert-danger" role="alert" style="width: auto;">
                                {{accError}}
                            </div>
                            {{else if accSucceed}}
                            <div class="alert alert-success" role="alert" style="width: auto;">
                                {{accSucceed}}
                            </div>
                            {{/if}}
                                
                                <button type="submit" class="btn " id="submit_info" style="float: right;">Update</button>
                            </form>
                        </div>

                    </div>
                </div>
            </div>
            <!-- Start Blog Post Sidebar -->


            <!-- End Blog Post Sidebar -->

        </div>
    </div>
</section>
<!--================Blog Area =================-->

<!--================ Start Footer Area =================-->
{{> index/indexFooter}}
<!--================ End Footer Area ===================-->


<script>
    $('document').ready(function () {
        $("#imgLoad").change(function () {
            if (this.files && this.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#imgShow').attr('src', e.target.result);
                }
                reader.readAsDataURL(this.files[0]);
            }
        });
    });
</script>

<script>
    // Replace the <textarea id="editor1"> with a CKEditor 4
    // instance, using default configuration.
    CKEDITOR.replace('introduction', {
        extraPlugins: 'filebrowser',
        filebrowserBrowseUrl: '/list',//upload location
        filebrowserUploadMethod: 'form',
        filebrowserUploadUrl: '/upload'//route;
    })
</script>

<script src="/javascripts/hideShowPwd.js"></script>